<!DOCTYPE html>
<html>
<head>
    <title>로그인 테스트</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; border-radius: 8px; }
        .success { color: green; }
        .error { color: red; }
        button { padding: 10px 20px; margin: 5px; }
    </style>
</head>
<body>
    <h1>🧪 로그인 기능 테스트</h1>
    
    <div class="test-section">
        <h2>📋 테스트 계정</h2>
        <p><strong>아이디:</strong> 아빠</p>
        <p><strong>PIN:</strong> 9329</p>
    </div>
    
    <div class="test-section">
        <h2>🎮 게임 로그인 테스트</h2>
        <button onclick="openGameAndLogin()">게임 열어서 로그인 하기</button>
        <div id="test-result"></div>
    </div>
    
    <script>
        function openGameAndLogin() {
            const resultDiv = document.getElementById('test-result');
            resultDiv.innerHTML = '<p>게임 창을 열고 있습니다...</p>';
            
            // 새 창에서 게임 열기
            const gameWindow = window.open('/', 'game', 'width=1200,height=800');
            
            if (!gameWindow) {
                resultDiv.innerHTML = '<p class="error">팝업이 차단되었습니다. 팝업 차단을 해제해주세요.</p>';
                return;
            }
            
            // 게임 로드 후 자동 로그인 시뮬레이션
            setTimeout(() => {
                try {
                    // 게임 창이 로드되면 로그인 정보 입력
                    const nameInput = gameWindow.document.getElementById('player-name-input');
                    const pinInput = gameWindow.document.getElementById('player-pin-input');
                    
                    if (nameInput && pinInput) {
                        nameInput.value = '아빠';
                        pinInput.value = '9329';
                        
                        resultDiv.innerHTML = '<p class="success">✅ 로그인 정보가 입력되었습니다!</p><p>게임 창에서 로그인 버튼을 클릭해주세요.</p>';
                        
                        // 로그인 버튼에 포커스
                        const loginBtn = gameWindow.document.getElementById('login-btn');
                        if (loginBtn) {
                            loginBtn.focus();
                        }
                    } else {
                        resultDiv.innerHTML = '<p class="error">❌ 로그인 폼을 찾을 수 없습니다. 게임이 완전히 로드될 때까지 기다려주세요.</p>';
                    }
                } catch (error) {
                    resultDiv.innerHTML = `<p class="error">❌ 오류: ${error.message}</p><p>게임 창에서 수동으로 로그인해주세요.</p>`;
                }
            }, 3000);
        }
    </script>
</body>
</html>