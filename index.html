<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üêæ ÎèôÎ¨º ÏàòÏßë ÏàòÌïô Í≤åÏûÑ üêæ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #87CEEB 0%, #98FB98 50%, #FFB6C1 100%);
            min-height: 100vh;
            color: #333;
        }

        .game-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Ìó§Îçî Ïä§ÌÉÄÏùº */
        .header {
            text-align: center;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }

        .header h1 {
            color: #2C5530;
            font-size: 2.8rem;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .nav-btn {
            background: linear-gradient(45deg, #4169E1, #1E90FF);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .nav-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .nav-btn.active {
            background: linear-gradient(45deg, #32CD32, #228B22);
        }

        .user-info {
            margin: 15px 0;
        }

        .current-user {
            background: linear-gradient(45deg, #FF69B4, #FFB6C1);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            display: inline-block;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .game-stats {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .stat-item {
            background: linear-gradient(45deg, #FFD700, #FFA500);
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            color: #8B4513;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            min-width: 120px;
            text-align: center;
        }

        /* ÌéòÏù¥ÏßÄ ÏãúÏä§ÌÖú */
        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        /* Í≤åÏûÑ ÌéòÏù¥ÏßÄ */
        .game-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .math-section {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            text-align: center;
        }

        .math-section h2 {
            color: #2C5530;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }

        .difficulty-badge {
            background: linear-gradient(45deg, #9370DB, #8A2BE2);
            color: white;
            padding: 8px 16px;
            border-radius: 15px;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 20px;
        }

        .question {
            font-size: 2.5rem;
            color: #4169E1;
            margin: 25px 0;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        .answer-input {
            font-size: 1.8rem;
            padding: 15px 20px;
            border: 3px solid #87CEEB;
            border-radius: 20px;
            width: 250px;
            margin: 15px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .answer-input:focus {
            outline: none;
            border-color: #4169E1;
            box-shadow: 0 0 20px rgba(65, 105, 225, 0.4);
        }

        .submit-btn {
            background: linear-gradient(45deg, #32CD32, #228B22);
            color: white;
            border: none;
            padding: 18px 35px;
            font-size: 1.3rem;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 15px;
            font-weight: bold;
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .feedback {
            margin: 20px 0;
            padding: 20px;
            border-radius: 20px;
            font-weight: bold;
            text-align: center;
            font-size: 1.2rem;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.5s ease;
        }

        .feedback.correct {
            background: linear-gradient(45deg, #90EE90, #32CD32);
            color: #006400;
        }

        .feedback.incorrect {
            background: linear-gradient(45deg, #FFB6C1, #FF69B4);
            color: #8B0000;
        }

        /* ÎèôÎ¨º Ïª¨Î†âÏÖò */
        .collection-section {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }

        .collection-section h2 {
            color: #2C5530;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.8rem;
        }

        .collection-hint {
            text-align: center;
            color: #666;
            margin-bottom: 20px;
            font-style: italic;
        }

        .animal-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 20px;
            max-height: 450px;
            overflow-y: auto;
        }

        .animal-card {
            background: linear-gradient(45deg, #FFE4E1, #F0E68C);
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
            transition: all 0.3s ease;
            cursor: pointer;
            border: 3px solid transparent;
        }

        .animal-card:hover {
            transform: scale(1.08);
            box-shadow: 0 12px 35px rgba(0,0,0,0.25);
        }

        .animal-emoji {
            font-size: 3.5rem;
            display: block;
            margin-bottom: 12px;
        }

        .animal-name {
            font-weight: bold;
            color: #2C5530;
            margin-bottom: 8px;
            font-size: 1rem;
        }

        .special-name {
            color: #8B4513;
            font-style: italic;
            font-size: 0.9rem;
            margin-bottom: 8px;
        }

        .animal-count {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 8px;
        }

        .rarity-badge {
            background: linear-gradient(45deg, #FFD700, #FFA500);
            color: #8B4513;
            font-size: 0.8rem;
            font-weight: bold;
            padding: 4px 10px;
            border-radius: 12px;
            display: inline-block;
        }

        /* ÏÇ¨Ïö©Ïûê Í¥ÄÎ¶¨ ÌéòÏù¥ÏßÄ */
        .user-management {
            background: rgba(255, 255, 255, 0.95);
            padding: 35px;
            border-radius: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            max-width: 900px;
            margin: 0 auto;
        }

        .user-management h2 {
            color: #2C5530;
            margin-bottom: 25px;
            text-align: center;
            font-size: 2rem;
        }

        .user-form {
            background: linear-gradient(45deg, #E6F3FF, #F0E6FF);
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 25px;
        }

        .user-form h3 {
            color: #4169E1;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .user-input {
            width: 280px;
            padding: 15px;
            font-size: 1.1rem;
            border: 2px solid #87CEEB;
            border-radius: 15px;
            margin: 0 15px 15px 0;
        }

        .user-btn {
            background: linear-gradient(45deg, #32CD32, #228B22);
            color: white;
            border: none;
            padding: 15px 25px;
            font-size: 1rem;
            border-radius: 15px;
            cursor: pointer;
            margin: 5px;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .user-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .user-btn.danger {
            background: linear-gradient(45deg, #FF6B6B, #FF4757);
        }

        .user-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }

        .user-card {
            background: linear-gradient(45deg, #FFE4E1, #F0E68C);
            padding: 20px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
            transition: all 0.3s ease;
            cursor: pointer;
            border: 3px solid transparent;
        }

        .user-card:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(0,0,0,0.25);
        }

        .user-card.active {
            border: 3px solid #32CD32;
            background: linear-gradient(45deg, #90EE90, #98FB98);
        }

        .user-card h4 {
            color: #2C5530;
            margin-bottom: 12px;
            font-size: 1.2rem;
        }

        .user-stats {
            font-size: 0.95rem;
            color: #666;
            line-height: 1.4;
        }

        /* ÏÇ¨Ïö©ÏÑ§Î™ÖÏÑú ÌéòÏù¥ÏßÄ */
        .instructions {
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            max-width: 900px;
            margin: 0 auto;
        }

        .instructions h2 {
            color: #2C5530;
            font-size: 2.2rem;
            margin-bottom: 25px;
            text-align: center;
        }

        .instructions h3 {
            color: #4169E1;
            font-size: 1.4rem;
            margin: 25px 0 15px 0;
        }

        .instructions p, .instructions li {
            font-size: 1.1rem;
            line-height: 1.7;
            color: #333;
            margin-bottom: 12px;
        }

        .instructions ul {
            margin-left: 25px;
            margin-bottom: 18px;
        }

        .rarity-examples {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .rarity-example {
            padding: 8px 15px;
            border-radius: 15px;
            font-weight: bold;
            border: 2px solid;
        }

        .rarity-1 { background: #E6F3FF; color: #4169E1; border-color: #87CEEB; }
        .rarity-2 { background: #E6F7E6; color: #228B22; border-color: #32CD32; }
        .rarity-3 { background: #F0E6FF; color: #8A2BE2; border-color: #9370DB; }
        .rarity-4 { background: #FFF0E6; color: #FF8C00; border-color: #FFD700; }
        .rarity-5 { background: #FFE6E6; color: #DC143C; border-color: #FF69B4; }
        .rarity-6 { background: #FFFACD; color: #B8860B; border-color: #FFD700; }

        /* ÌäπÏàò Ìö®Í≥º */
        .new-animal-alert {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(45deg, #FFD700, #FFA500);
            padding: 35px;
            border-radius: 25px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.4);
            z-index: 1000;
            animation: popIn 0.6s ease;
        }

        .new-animal-alert .new-animal-emoji {
            font-size: 6rem;
            display: block;
            margin-bottom: 20px;
        }

        .new-animal-alert h3 {
            color: #8B4513;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .new-animal-alert p {
            color: #8B4513;
            font-weight: bold;
            margin-bottom: 10px;
        }

        @keyframes popIn {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
            50% { transform: translate(-50%, -50%) scale(1.1); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }

        .growth-effect {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2000;
            pointer-events: none;
        }

        .growth-particles {
            width: 400px;
            height: 400px;
            position: relative;
        }

        .particle {
            position: absolute;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            animation: sparkle 2s ease-out forwards;
        }

        @keyframes sparkle {
            0% {
                opacity: 1;
                transform: scale(0) rotate(0deg);
            }
            50% {
                opacity: 0.9;
                transform: scale(2) rotate(180deg);
            }
            100% {
                opacity: 0;
                transform: scale(0.3) rotate(360deg);
            }
        }

        .growth-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(45deg, #FFD700, #FFA500);
            color: #8B4513;
            padding: 25px 35px;
            border-radius: 25px;
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            box-shadow: 0 15px 40px rgba(0,0,0,0.4);
            animation: growthPop 2.5s ease-out forwards;
        }

        @keyframes growthPop {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 0;
            }
            20% {
                transform: translate(-50%, -50%) scale(1.3);
                opacity: 1;
            }
            80% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(0.8);
                opacity: 0;
            }
        }

        /* ÏÉÅÌÉú ÌëúÏãú */
        .status-indicator {
            position: fixed;
            top: 15px;
            right: 15px;
            background: #90EE90;
            color: #006400;
            padding: 8px 15px;
            border-radius: 15px;
            font-size: 0.9rem;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        /* Î∞òÏùëÌòï ÎîîÏûêÏù∏ */
        @media (max-width: 768px) {
            .game-container {
                padding: 15px;
            }

            .header h1 {
                font-size: 2.2rem;
            }

            .game-content {
                grid-template-columns: 1fr;
            }

            .game-stats {
                flex-direction: column;
                align-items: center;
                gap: 10px;
            }

            .nav-buttons {
                flex-direction: column;
                align-items: center;
                gap: 10px;
            }

            .question {
                font-size: 2rem;
            }

            .answer-input {
                width: 200px;
                font-size: 1.5rem;
            }

            .animal-grid {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
                gap: 15px;
            }

            .user-list {
                grid-template-columns: 1fr;
            }

            .rarity-examples {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- Ìó§Îçî -->
        <div class="header">
            <h1>üêæ ÎèôÎ¨º ÏàòÏßë ÏàòÌïô Í≤åÏûÑ üêæ</h1>
            
            <div class="nav-buttons">
                <button class="nav-btn active" onclick="showPage('game')">Í≤åÏûÑÌïòÍ∏∞ üéÆ</button>
                <button class="nav-btn" onclick="showPage('instructions')">ÏÇ¨Ïö©ÏÑ§Î™ÖÏÑú üìñ</button>
                <button class="nav-btn" onclick="showPage('users')">ÏÇ¨Ïö©Ïûê Í¥ÄÎ¶¨ üë•</button>
            </div>

            <div class="user-info" id="user-info">
                <div class="current-user">ÌòÑÏû¨ ÌîåÎ†àÏù¥Ïñ¥: <span id="current-user-name">Í≤åÏä§Ìä∏</span></div>
            </div>

            <div class="game-stats" id="game-stats">
                <div class="stat-item">Î†àÎ≤® <span id="level">1</span></div>
                <div class="stat-item">Ï†êÏàò: <span id="score">0</span>Ï†ê</div>
                <div class="stat-item">ÎèôÎ¨º Ï¢ÖÎ•ò: <span id="species-count">0</span>Ï¢Ö</div>
                <div class="stat-item">Ï¥ù ÎèôÎ¨º: <span id="total-animals">0</span>ÎßàÎ¶¨</div>
            </div>
        </div>

        <!-- Í≤åÏûÑ ÌéòÏù¥ÏßÄ -->
        <div id="game-page" class="page active">
            <div class="game-content">
                <div class="math-section">
                    <h2>üßÆ ÏàòÌïô Î¨∏Ï†ú</h2>
                    <div class="difficulty-badge">ÌòÑÏû¨ ÎÇúÏù¥ÎèÑ: <span id="difficulty">Ïâ¨ÏõÄ</span></div>
                    <div class="question" id="question">5 + 3 = ?</div>
                    <input type="number" class="answer-input" id="answer" placeholder="ÎãµÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî">
                    <br>
                    <button class="submit-btn" onclick="checkAnswer()">Îãµ ÌôïÏù∏ÌïòÍ∏∞! üéØ</button>
                    <div class="feedback" id="feedback"></div>
                </div>

                <div class="collection-section">
                    <h2>üè† ÎÇ¥ ÎèôÎ¨º Ïª¨Î†âÏÖò</h2>
                    <p class="collection-hint">üí° Í∞ôÏùÄ ÎèôÎ¨º 2ÎßàÎ¶¨Î•º ÌÅ¥Î¶≠ÌïòÎ©¥ ÏÑ±Ïû•ÏãúÌÇ¨ Ïàò ÏûàÏñ¥Ïöî!</p>
                    <div class="animal-grid" id="animal-collection"></div>
                </div>
            </div>
        </div>

        <!-- ÏÇ¨Ïö©ÏÑ§Î™ÖÏÑú ÌéòÏù¥ÏßÄ -->
        <div id="instructions-page" class="page">
            <div class="instructions">
                <h2>üìñ Í≤åÏûÑ ÏÇ¨Ïö©ÏÑ§Î™ÖÏÑú</h2>
                
                <h3>üéØ Í≤åÏûÑ Î™©Ìëú</h3>
                <p>ÏàòÌïô Î¨∏Ï†úÎ•º ÌíÄÏñ¥ÏÑú Îã§ÏñëÌïú ÎèôÎ¨ºÎì§ÏùÑ ÏàòÏßëÌïòÍ≥†, Í∞ôÏùÄ Ï¢ÖÏùò ÎèôÎ¨ºÎì§ÏùÑ ÏÑ±Ïû•ÏãúÏºú ÎÇòÎßåÏùò ÎèôÎ¨ºÏõêÏùÑ ÎßåÎì§Ïñ¥Î≥¥ÏÑ∏Ïöî!</p>
                
                <h3>üßÆ ÏàòÌïô Î¨∏Ï†ú ÏãúÏä§ÌÖú</h3>
                <ul>
                    <li><strong>Î†àÎ≤® 1-2:</strong> Ìïú ÏûêÎ¶¨ ÎçßÏÖàÍ≥º Î∫ÑÏÖà (Ïòà: 5 + 3, 8 - 2)</li>
                    <li><strong>Î†àÎ≤® 3-5:</strong> Îëê ÏûêÎ¶¨ ÎçßÏÖàÍ≥º Î∫ÑÏÖà (Ïòà: 25 + 17, 43 - 18)</li>
                    <li><strong>Î†àÎ≤® 6-8:</strong> Íµ¨Íµ¨Îã® Í≥±ÏÖà (Ïòà: 7 √ó 4, 9 √ó 6)</li>
                    <li><strong>Î†àÎ≤® 9+:</strong> ÎÇòÎàóÏÖà (Ïòà: 56 √∑ 8, 72 √∑ 9)</li>
                </ul>
                
                <h3>üêæ ÎèôÎ¨º ÏàòÏßë ÏãúÏä§ÌÖú</h3>
                <p><strong>Î¨∏Ï†úÎ•º ÎßûÌûê ÎïåÎßàÎã§</strong> ÎûúÎç§Ìïú ÎèôÎ¨ºÏùÑ 1ÎßàÎ¶¨Ïî© ÌöçÎìùÌï† Ïàò ÏûàÏñ¥Ïöî!</p>
                
                <h3>‚ú® Ìù¨Í∑ÄÎèÑ ÏãúÏä§ÌÖú</h3>
                <p>ÎèôÎ¨ºÎì§ÏùÄ Ìù¨Í∑ÄÎèÑÏóê Îî∞Îùº 6Í∞ú Îì±Í∏âÏúºÎ°ú ÎÇòÎâòÏñ¥Ï†∏ ÏûàÏñ¥Ïöî:</p>
                <div class="rarity-examples">
                    <span class="rarity-example rarity-1">‚òÖ1 ÏùºÎ∞ò</span>
                    <span class="rarity-example rarity-2">‚òÖ2 Î≥¥ÌÜµ</span>
                    <span class="rarity-example rarity-3">‚òÖ3 Í≥†Í∏â</span>
                    <span class="rarity-example rarity-4">‚òÖ4 Ìù¨Í∑Ä</span>
                    <span class="rarity-example rarity-5">‚òÖ5 Ï†ÑÏÑ§</span>
                    <span class="rarity-example rarity-6">‚òÖ6 Ïã†Ìôî</span>
                </div>
                <p>Î†àÎ≤®Ïù¥ ÎÜíÏïÑÏßàÏàòÎ°ù Îçî Ìù¨Í∑ÄÌïú ÎèôÎ¨ºÎì§ÏùÑ ÎßåÎÇ† Ïàò ÏûàÏñ¥Ïöî!</p>
                
                <h3>üåü ÎèôÎ¨º ÏÑ±Ïû• ÏãúÏä§ÌÖú</h3>
                <ul>
                    <li><strong>Í∞ôÏùÄ Ï¢ÖÎ•òÏùò ÎèôÎ¨º Ïπ¥ÎìúÎ•º ÌÅ¥Î¶≠</strong>ÌïòÎ©¥ ÏÑ±Ïû•ÏãúÌÇ¨ Ïàò ÏûàÏñ¥Ïöî</li>
                    <li><strong>2ÎßàÎ¶¨Í∞Ä ÏûàÏñ¥Ïïº</strong> 1ÎßàÎ¶¨Î°ú ÏÑ±Ïû• Í∞ÄÎä•Ìï¥Ïöî</li>
                    <li>ÏÑ±Ïû•Ìïú ÎèôÎ¨ºÏùÄ <strong>Îçî Í∞ïÌï¥ÏßÄÍ≥† ÌäπÎ≥ÑÌïú Ìö®Í≥º</strong>Í∞Ä ÎÇòÌÉÄÎÇòÏöî</li>
                    <li>ÏÑ±Ïû•Ìï† ÎïåÎßàÎã§ Î©ãÏßÑ <strong>ÌååÌã∞ÌÅ¥ Ìö®Í≥º</strong>Î•º Î≥º Ïàò ÏûàÏñ¥Ïöî! ‚ú®</li>
                </ul>
                
                <h3>üë• ÏÇ¨Ïö©Ïûê Í¥ÄÎ¶¨ ÏãúÏä§ÌÖú</h3>
                <ul>
                    <li><strong>Ïó¨Îü¨ ÏÇ¨Ïö©Ïûê</strong>Í∞Ä Í∞ÅÏûêÏùò ÏßÑÌñâÏÉÅÌô©ÏùÑ Îî∞Î°ú Ï†ÄÏû•Ìï† Ïàò ÏûàÏñ¥Ïöî</li>
                    <li><strong>ÌååÏùº Ï†ÄÏû•</strong>ÏúºÎ°ú Í≤åÏûÑ Îç∞Ïù¥ÌÑ∞Î•º Î∞±ÏóÖÌïòÍ≥† Î≥µÏõê Í∞ÄÎä•!</li>
                    <li><strong>ÏàúÏúÑÌëú</strong>ÏóêÏÑú ÏπúÍµ¨Îì§Í≥º Ï†êÏàò ÎπÑÍµêÌïòÍ∏∞</li>
                    <li><strong>ÏÇ¨Ïö©Ïûê Ï†ÑÌôò</strong>ÏúºÎ°ú ÏâΩÍ≤å Îã§Î•∏ ÌîåÎ†àÏù¥Ïñ¥Î°ú Î≥ÄÍ≤Ω</li>
                </ul>
                
                <h3>üèÜ Î†àÎ≤®ÏóÖ ÏãúÏä§ÌÖú</h3>
                <p>Ï†êÏàòÍ∞Ä <strong>(ÌòÑÏû¨ Î†àÎ≤® √ó 50Ï†ê)</strong>Ïóê ÎèÑÎã¨ÌïòÎ©¥ Î†àÎ≤®ÏóÖ!</p>
                <ul>
                    <li>Î†àÎ≤®ÏóÖ Ïãú Îçî Ïñ¥Î†§Ïö¥ Î¨∏Ï†ú Ï∂úÏ†ú</li>
                    <li>Îçî Ìù¨Í∑ÄÌïú ÎèôÎ¨º ÌöçÎìù Í∏∞Ìöå Ï¶ùÍ∞Ä</li>
                    <li>Ìïú Î¨∏Ï†úÎãπ Îçî ÎßéÏùÄ Ï†êÏàò ÌöçÎìù</li>
                </ul>
                
                <h3>üéÆ Ï°∞ÏûëÎ≤ï</h3>
                <ul>
                    <li><strong>Ïà´Ïûê ÏûÖÎ†•:</strong> ÌÇ§Î≥¥ÎìúÎÇò ÌôîÎ©¥Ïùò ÏûÖÎ†•Ï∞Ω ÏÇ¨Ïö©</li>
                    <li><strong>Îãµ Ï†úÏ∂ú:</strong> "Îãµ ÌôïÏù∏ÌïòÍ∏∞" Î≤ÑÌäº ÌÅ¥Î¶≠ ÎòêÎäî Enter ÌÇ§</li>
                    <li><strong>ÎèôÎ¨º ÏÑ±Ïû•:</strong> ÎèôÎ¨º Ïπ¥ÎìúÎ•º ÌÅ¥Î¶≠ (2ÎßàÎ¶¨ Ïù¥ÏÉÅ Î≥¥Ïú† Ïãú)</li>
                    <li><strong>ÏÇ¨Ïö©Ïûê Ï†ÑÌôò:</strong> ÏÇ¨Ïö©Ïûê Í¥ÄÎ¶¨ ÌéòÏù¥ÏßÄÏóêÏÑú ÏÇ¨Ïö©Ïûê Ïπ¥Îìú ÌÅ¥Î¶≠</li>
                </ul>
                
                <h3>üé® ÌäπÎ≥ÑÌïú ÎèôÎ¨ºÎì§</h3>
                <p>Í∞Å ÎèôÎ¨ºÎßàÎã§ ÌäπÎ≥ÑÌïú Ïù¥Î¶ÑÏù¥ ÏûàÏñ¥Ïöî:</p>
                <ul>
                    <li>üê∂ <strong>Î©çÎ©çÏôïÏûê</strong> - Ï∂©ÏÑ±Ïä§Îü¨Ïö¥ Í∞ïÏïÑÏßÄ</li>
                    <li>üê± <strong>ÏïºÏòπÍ≥µÏ£º</strong> - Ïö∞ÏïÑÌïú Í≥†ÏñëÏù¥</li>
                    <li>üê∞ <strong>Íπ°Ï¥ùÎåÄÏû•</strong> - Îπ†Î•∏ ÌÜ†ÎÅº</li>
                    <li>ü¶â <strong>ÏßÄÌòúÎ°úÏö¥Ïûê</strong> - ÎòëÎòëÌïú Ïò¨ÎπºÎØ∏</li>
                    <li>üê≤ <strong>Ï†ÑÏÑ§ÏùòÎìúÎûòÍ≥§</strong> - ÏµúÍ≥† Ìù¨Í∑Ä ÎèôÎ¨º!</li>
                    <li>Í∑∏Î¶¨Í≥† Îçî ÎßéÏùÄ ÎèôÎ¨ºÎì§Ïù¥ Ïó¨Îü¨Î∂ÑÏùÑ Í∏∞Îã§Î¶¨Í≥† ÏûàÏñ¥Ïöî!</li>
                </ul>
                
                <p style="text-align: center; margin-top: 40px; font-size: 1.3rem; color: #2C5530;">
                    <strong>üåü Ï¶êÍ≤ÅÍ≤å ÏàòÌïôÏùÑ Í≥µÎ∂ÄÌïòÎ©¥ÏÑú ÎèôÎ¨º ÏπúÍµ¨Îì§ÏùÑ Î™®ÏïÑÎ≥¥ÏÑ∏Ïöî! üåü</strong>
                </p>
            </div>
        </div>

        <!-- ÏÇ¨Ïö©Ïûê Í¥ÄÎ¶¨ ÌéòÏù¥ÏßÄ -->
        <div id="users-page" class="page">
            <div class="user-management">
                <h2>üë• ÏÇ¨Ïö©Ïûê Í¥ÄÎ¶¨</h2>
                
                <div class="user-form">
                    <h3>üÜï ÏÉà ÏÇ¨Ïö©Ïûê ÎßåÎì§Í∏∞</h3>
                    <input type="text" id="new-user-name" class="user-input" placeholder="ÏÇ¨Ïö©Ïûê Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" maxlength="20">
                    <button class="user-btn" onclick="createUser()">ÏÇ¨Ïö©Ïûê ÏÉùÏÑ± ‚ú®</button>
                </div>
                
                <div class="user-form">
                    <h3>üíæ Îç∞Ïù¥ÌÑ∞ Í¥ÄÎ¶¨</h3>
                    <button class="user-btn" onclick="exportGameData()">Îç∞Ïù¥ÌÑ∞ ÎÇ¥Î≥¥ÎÇ¥Í∏∞ üì§</button>
                    <input type="file" id="import-file" accept=".json" style="display: none;" onchange="importGameData(event)">
                    <button class="user-btn" onclick="document.getElementById('import-file').click()">Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞ üì•</button>
                    <button class="user-btn danger" onclick="resetAllData()">Î™®Îì† Îç∞Ïù¥ÌÑ∞ Ï¥àÍ∏∞Ìôî üóëÔ∏è</button>
                </div>
                
                <h3>üèÜ ÏÇ¨Ïö©Ïûê Î™©Î°ù Î∞è ÏàúÏúÑ</h3>
                <div class="user-list" id="user-list"></div>
            </div>
        </div>
    </div>

    <!-- ÏÉÅÌÉú ÌëúÏãú -->
    <div class="status-indicator">Î°úÏª¨ Ï†ÄÏû•ÏÜå ‚úÖ</div>

    <script>
        // ==================== Í≤åÏûÑ Îç∞Ïù¥ÌÑ∞ ====================
        
        // Í≤åÏûÑ ÏÉÅÌÉú
        let gameState = {
            score: 0,
            level: 1,
            currentQuestion: {},
            animals: {},
            totalAnimals: 0,
            speciesCount: 0
        };

        // ÏÇ¨Ïö©Ïûê Í¥ÄÎ¶¨
        let currentUser = 'Í≤åÏä§Ìä∏';
        let allUsers = {};

        // ÎèôÎ¨º ÌÉÄÏûÖ Ï†ïÏùò
        const animalTypes = [
            {emoji: 'üê∂', name: 'Í∞ïÏïÑÏßÄ', specialName: 'Î©çÎ©çÏôïÏûê', rarity: 1},
            {emoji: 'üê±', name: 'Í≥†ÏñëÏù¥', specialName: 'ÏïºÏòπÍ≥µÏ£º', rarity: 1},
            {emoji: 'üê∞', name: 'ÌÜ†ÎÅº', specialName: 'Íπ°Ï¥ùÎåÄÏû•', rarity: 1},
            {emoji: 'üê∏', name: 'Í∞úÍµ¨Î¶¨', specialName: 'Í∞úÍ≥®Î∞ïÏÇ¨', rarity: 1},
            {emoji: 'ü¶Ü', name: 'Ïò§Î¶¨', specialName: 'ÍΩ•ÍΩ•ÏÑ†Ïû•', rarity: 2},
            {emoji: 'üê∑', name: 'ÎèºÏßÄ', specialName: 'ÍøÄÍøÄÎåÄÎßàÏôï', rarity: 2},
            {emoji: 'üêÆ', name: 'ÏÜå', specialName: 'ÏùåÎ©îÏöîÏ†ï', rarity: 2},
            {emoji: 'üêô', name: 'Î¨∏Ïñ¥', specialName: 'Ï¥âÏàòÎßàÎ≤ïÏÇ¨', rarity: 2},
            {emoji: 'ü¶ã', name: 'ÎÇòÎπÑ', specialName: 'Î¨¥ÏßÄÍ∞úÎÇ†Í∞ú', rarity: 3},
            {emoji: 'üêù', name: 'Î≤å', specialName: 'ÍøÄÎ≤åÍ∏∞ÏÇ¨', rarity: 3},
            {emoji: 'ü¶â', name: 'Ïò¨ÎπºÎØ∏', specialName: 'ÏßÄÌòúÎ°úÏö¥Ïûê', rarity: 3},
            {emoji: 'üê∫', name: 'ÎäëÎåÄ', specialName: 'Îã¨ÎπõÏÇ¨ÎÉ•Íæº', rarity: 4},
            {emoji: 'ü¶Ö', name: 'ÎèÖÏàòÎ¶¨', specialName: 'ÌïòÎäòÏ†úÏôï', rarity: 4},
            {emoji: 'üêØ', name: 'Ìò∏ÎûëÏù¥', specialName: 'Ìò∏ÎûëÏö©ÏÇ¨', rarity: 5},
            {emoji: 'ü¶Å', name: 'ÏÇ¨Ïûê', specialName: 'Ìô©Í∏àÍ∞àÍ∏∞Ïôï', rarity: 5},
            {emoji: 'üê≤', name: 'Ïö©', specialName: 'Ï†ÑÏÑ§ÏùòÎìúÎûòÍ≥§', rarity: 6}
        ];

        // ==================== ÌïµÏã¨ Í≤åÏûÑ Ìï®Ïàò ====================

        // ÏàòÌïô Î¨∏Ï†ú ÏÉùÏÑ±
        function generateQuestion() {
            const difficulty = Math.min(Math.floor(gameState.level / 3) + 1, 4);
            let question = {};
            
            switch(difficulty) {
                case 1: // Ìïú ÏûêÎ¶¨ ÎçßÏÖà/Î∫ÑÏÖà
                    const a1 = Math.floor(Math.random() * 10) + 1;
                    const b1 = Math.floor(Math.random() * 10) + 1;
                    if (Math.random() > 0.5) {
                        question = {text: `${a1} + ${b1}`, answer: a1 + b1};
                    } else {
                        const larger = Math.max(a1, b1);
                        const smaller = Math.min(a1, b1);
                        question = {text: `${larger} - ${smaller}`, answer: larger - smaller};
                    }
                    break;
                    
                case 2: // Îëê ÏûêÎ¶¨ ÎçßÏÖà/Î∫ÑÏÖà
                    const a2 = Math.floor(Math.random() * 50) + 10;
                    const b2 = Math.floor(Math.random() * 30) + 5;
                    if (Math.random() > 0.5) {
                        question = {text: `${a2} + ${b2}`, answer: a2 + b2};
                    } else {
                        question = {text: `${a2} - ${b2}`, answer: a2 - b2};
                    }
                    break;
                    
                case 3: // Í≥±ÏÖà
                    const a3 = Math.floor(Math.random() * 9) + 2;
                    const b3 = Math.floor(Math.random() * 9) + 2;
                    question = {text: `${a3} √ó ${b3}`, answer: a3 * b3};
                    break;
                    
                case 4: // ÎÇòÎàóÏÖà
                    const result = Math.floor(Math.random() * 8) + 2;
                    const divisor = Math.floor(Math.random() * 8) + 2;
                    const dividend = result * divisor;
                    question = {text: `${dividend} √∑ ${divisor}`, answer: result};
                    break;
            }
            
            gameState.currentQuestion = question;
            document.getElementById('question').textContent = `${question.text} = ?`;
            document.getElementById('answer').value = '';
            document.getElementById('feedback').textContent = '';
            document.getElementById('feedback').className = 'feedback';
            
            // ÎÇúÏù¥ÎèÑ ÌëúÏãú ÏóÖÎç∞Ïù¥Ìä∏
            const difficultyNames = ['Ïâ¨ÏõÄ', 'Î≥¥ÌÜµ', 'Ïñ¥Î†§ÏõÄ', 'Îß§Ïö∞ Ïñ¥Î†§ÏõÄ'];
            document.getElementById('difficulty').textContent = difficultyNames[difficulty - 1];
        }

        // ÎãµÏïà ÌôïÏù∏
        function checkAnswer() {
            const userAnswer = parseInt(document.getElementById('answer').value);
            const feedback = document.getElementById('feedback');
            
            if (isNaN(userAnswer)) {
                feedback.textContent = 'Ïà´ÏûêÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî! üî¢';
                feedback.className = 'feedback incorrect';
                return;
            }
            
            if (userAnswer === gameState.currentQuestion.answer) {
                // Ï†ïÎãµ Ï≤òÎ¶¨
                gameState.score += 10 * gameState.level;
                feedback.textContent = 'Ï†ïÎãµÏûÖÎãàÎã§! ÌõåÎ•≠Ìï¥Ïöî! üéâ';
                feedback.className = 'feedback correct';
                
                // ÎèôÎ¨º ÌöçÎìù
                const newAnimal = getRandomAnimal();
                addAnimal(newAnimal);
                
                // Î†àÎ≤®ÏóÖ Ï≤¥ÌÅ¨
                if (gameState.score >= gameState.level * 50) {
                    gameState.level++;
                    showLevelUp();
                }
                
                // ÏÇ¨Ïö©Ïûê Îç∞Ïù¥ÌÑ∞ ÏûêÎèô Ï†ÄÏû•
                saveCurrentUserData();
                
                setTimeout(() => {
                    generateQuestion();
                }, 2500);
                
            } else {
                // Ïò§Îãµ Ï≤òÎ¶¨
                feedback.textContent = `ÌãÄÎ†∏Ïñ¥Ïöî! Ï†ïÎãµÏùÄ ${gameState.currentQuestion.answer}ÏûÖÎãàÎã§. Îã§Ïãú ÎèÑÏ†ÑÌï¥Î≥¥ÏÑ∏Ïöî! üí™`;
                feedback.className = 'feedback incorrect';
                
                setTimeout(() => {
                    generateQuestion();
                }, 3500);
            }
            
            updateUI();
        }

        // ÎûúÎç§ ÎèôÎ¨º ÌöçÎìù
        function getRandomAnimal() {
            const maxRarity = Math.min(Math.floor(gameState.level / 2) + 1, 6);
            const availableAnimals = animalTypes.filter(animal => animal.rarity <= maxRarity);
            
            // Ìù¨Í∑ÄÎèÑÏóê Îî∞Î•∏ Í∞ÄÏ§ëÏπò
            const weights = availableAnimals.map(animal => Math.pow(0.7, animal.rarity - 1));
            const totalWeight = weights.reduce((sum, weight) => sum + weight, 0);
            
            let random = Math.random() * totalWeight;
            for (let i = 0; i < availableAnimals.length; i++) {
                random -= weights[i];
                if (random <= 0) {
                    return availableAnimals[i];
                }
            }
            
            return availableAnimals[0];
        }

        // ÎèôÎ¨º Ï∂îÍ∞Ä
        function addAnimal(animal) {
            const key = animal.name;
            if (!gameState.animals[key]) {
                gameState.animals[key] = {
                    ...animal,
                    count: 0
                };
                gameState.speciesCount++;
                showNewAnimalAlert(animal);
            }
            
            gameState.animals[key].count++;
            gameState.totalAnimals++;
            
            updateAnimalCollection();
        }

        // ÎèôÎ¨º ÏÑ±Ïû•
        function growAnimal(animalName) {
            const animal = gameState.animals[animalName];
            
            if (animal.count >= 2) {
                animal.count -= 2;
                animal.count += 1; // 2ÎßàÎ¶¨Í∞Ä 1ÎßàÎ¶¨Î°ú ÏÑ±Ïû•
                gameState.totalAnimals -= 1;
                
                // ÏÑ±Ïû• Ìö®Í≥º Ïã§Ìñâ
                createGrowthEffect();
                
                const feedback = document.getElementById('feedback');
                feedback.textContent = `${animal.specialName}Ïù¥(Í∞Ä) ÏÑ±Ïû•ÌñàÏäµÎãàÎã§! üåü`;
                feedback.className = 'feedback correct';
                
                updateAnimalCollection();
                updateUI();
                saveCurrentUserData();
                
                setTimeout(() => {
                    feedback.textContent = '';
                    feedback.className = 'feedback';
                }, 3000);
                
            } else {
                const feedback = document.getElementById('feedback');
                feedback.textContent = `${animal.specialName}Î•º ÏÑ±Ïû•ÏãúÌÇ§Î†§Î©¥ 2ÎßàÎ¶¨Í∞Ä ÌïÑÏöîÌï¥Ïöî! üêæ`;
                feedback.className = 'feedback incorrect';
                
                setTimeout(() => {
                    feedback.textContent = '';
                    feedback.className = 'feedback';
                }, 2500);
            }
        }

        // ==================== UI ÏóÖÎç∞Ïù¥Ìä∏ Ìï®Ïàò ====================

        // Í≤åÏûÑ UI ÏóÖÎç∞Ïù¥Ìä∏
        function updateUI() {
            document.getElementById('score').textContent = gameState.score;
            document.getElementById('level').textContent = gameState.level;
            document.getElementById('species-count').textContent = gameState.speciesCount;
            document.getElementById('total-animals').textContent = gameState.totalAnimals;
        }

        // ÎèôÎ¨º Ïª¨Î†âÏÖò ÏóÖÎç∞Ïù¥Ìä∏
        function updateAnimalCollection() {
            const collection = document.getElementById('animal-collection');
            collection.innerHTML = '';
            
            // Ìù¨Í∑ÄÎèÑ ÏàúÏúºÎ°ú Ï†ïÎ†¨
            const sortedAnimals = Object.values(gameState.animals)
                .sort((a, b) => b.rarity - a.rarity);
            
            sortedAnimals.forEach(animal => {
                const card = document.createElement('div');
                card.className = 'animal-card';
                
                // Ìù¨Í∑ÄÎèÑÏóê Îî∞Î•∏ ÌÖåÎëêÎ¶¨ ÏÉâÏÉÅ
                let borderColor = '#87CEEB';
                if (animal.rarity >= 5) borderColor = '#FFD700'; // Ï†ÑÏÑ§
                else if (animal.rarity >= 4) borderColor = '#9370DB'; // Ìù¨Í∑Ä
                else if (animal.rarity >= 3) borderColor = '#32CD32'; // Í≥†Í∏â
                
                card.style.borderColor = borderColor;
                card.style.boxShadow = `0 6px 20px ${borderColor}40`;
                
                card.innerHTML = `
                    <span class="animal-emoji">${animal.emoji}</span>
                    <div class="animal-name">${animal.name}</div>
                    <div class="special-name">"${animal.specialName}"</div>
                    <div class="animal-count">${animal.count}ÎßàÎ¶¨</div>
                    <div class="rarity-badge">‚òÖ${animal.rarity}</div>
                `;
                
                card.onclick = () => growAnimal(animal.name);
                collection.appendChild(card);
            });
        }

        // ==================== ÌäπÏàò Ìö®Í≥º Ìï®Ïàò ====================

        // ÏÉà ÎèôÎ¨º Î∞úÍ≤¨ ÏïåÎ¶º
        function showNewAnimalAlert(animal) {
            const alert = document.createElement('div');
            alert.className = 'new-animal-alert';
            
            let rarityText = '';
            if (animal.rarity >= 5) rarityText = '‚ú® Ï†ÑÏÑ§Í∏â ‚ú®';
            else if (animal.rarity >= 4) rarityText = 'üíú Ìù¨Í∑Ä üíú';
            else if (animal.rarity >= 3) rarityText = 'üíö Í≥†Í∏â üíö';
            else rarityText = 'üíô ÏùºÎ∞ò üíô';
            
            alert.innerHTML = `
                <span class="new-animal-emoji">${animal.emoji}</span>
                <h3>ÏÉàÎ°úÏö¥ ÎèôÎ¨º Î∞úÍ≤¨! üéâ</h3>
                <p><strong>${animal.specialName}</strong></p>
                <p>(${animal.name})ÏùÑ(Î•º) ÌöçÎìùÌñàÏäµÎãàÎã§!</p>
                <p>${rarityText}</p>
            `;
            
            document.body.appendChild(alert);
            
            setTimeout(() => {
                alert.remove();
            }, 4500);
        }

        // Î†àÎ≤®ÏóÖ ÏïåÎ¶º
        function showLevelUp() {
            const alert = document.createElement('div');
            alert.className = 'new-animal-alert';
            alert.innerHTML = `
                <span class="new-animal-emoji">‚≠ê</span>
                <h3>Î†àÎ≤® ÏóÖ! üéâ</h3>
                <p>Î†àÎ≤® ${gameState.level}Ïù¥ ÎêòÏóàÏäµÎãàÎã§!</p>
                <p>Îçî Ïñ¥Î†§Ïö¥ Î¨∏Ï†úÏôÄ Ìù¨Í∑ÄÌïú ÎèôÎ¨ºÎì§ÏùÑ ÎßåÎÇ† Ïàò ÏûàÏñ¥Ïöî!</p>
            `;
            
            document.body.appendChild(alert);
            
            setTimeout(() => {
                alert.remove();
            }, 4500);
        }

        // ÏÑ±Ïû• Ìö®Í≥º
        function createGrowthEffect() {
            const effect = document.createElement('div');
            effect.className = 'growth-effect';
            
            // ÌååÌã∞ÌÅ¥ Ïª®ÌÖåÏù¥ÎÑà
            const particles = document.createElement('div');
            particles.className = 'growth-particles';
            
            // 40Í∞úÏùò ÌååÌã∞ÌÅ¥ ÏÉùÏÑ±
            const colors = ['#FFD700', '#FFA500', '#FF69B4', '#32CD32', '#87CEEB', '#9370DB', '#FF4500', '#00CED1'];
            for (let i = 0; i < 40; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                
                // ÏõêÌòïÏúºÎ°ú Î∞∞Ïπò
                const angle = (i * 9) + Math.random() * 9;
                const distance = 60 + Math.random() * 120;
                const x = Math.cos(angle * Math.PI / 180) * distance;
                const y = Math.sin(angle * Math.PI / 180) * distance;
                
                particle.style.left = `${200 + x}px`;
                particle.style.top = `${200 + y}px`;
                particle.style.animationDelay = `${Math.random() * 0.8}s`;
                
                particles.appendChild(particle);
            }
            
            // ÏÑ±Ïû• Î©îÏãúÏßÄ
            const message = document.createElement('div');
            message.className = 'growth-message';
            message.innerHTML = 'üåü ÏÑ±Ïû• ÏÑ±Í≥µ! üåü<br>ÎèôÎ¨ºÏù¥ Îçî Í∞ïÌï¥Ï°åÏñ¥Ïöî!';
            
            effect.appendChild(particles);
            effect.appendChild(message);
            document.body.appendChild(effect);
            
            // 2.5Ï¥à ÌõÑ Ï†úÍ±∞
            setTimeout(() => {
                effect.remove();
            }, 2500);
        }

        // ==================== ÏÇ¨Ïö©Ïûê Í¥ÄÎ¶¨ Ìï®Ïàò ====================

        // ÏÇ¨Ïö©Ïûê ÏÉùÏÑ±
        function createUser() {
            const userName = document.getElementById('new-user-name').value.trim();
            
            if (!userName) {
                alert('ÏÇ¨Ïö©Ïûê Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî!');
                return;
            }
            
            if (allUsers[userName]) {
                alert('Ïù¥ÎØ∏ Ï°¥Ïû¨ÌïòÎäî ÏÇ¨Ïö©ÏûêÏûÖÎãàÎã§!');
                return;
            }
            
            const newUserData = {
                name: userName,
                score: 0,
                level: 1,
                animals: {},
                totalAnimals: 0,
                speciesCount: 0,
                createdAt: new Date().toISOString(),
                lastPlayed: new Date().toISOString()
            };
            
            allUsers[userName] = newUserData;
            document.getElementById('new-user-name').value = '';
            
            alert(`üéâ ${userName} ÏÇ¨Ïö©ÏûêÍ∞Ä ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§!`);
            updateUserList();
        }

        // ÏÇ¨Ïö©Ïûê Ï†ÑÌôò
        function switchUser(userName) {
            if (!allUsers[userName]) {
                alert('Ï°¥Ïû¨ÌïòÏßÄ ÏïäÎäî ÏÇ¨Ïö©ÏûêÏûÖÎãàÎã§!');
                return;
            }
            
            // ÌòÑÏû¨ ÏÇ¨Ïö©Ïûê Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû•
            saveCurrentUserData();
            
            // ÏÉà ÏÇ¨Ïö©ÏûêÎ°ú Ï†ÑÌôò
            currentUser = userName;
            const userData = allUsers[userName];
            
            gameState = {
                score: userData.score || 0,
                level: userData.level || 1,
                animals: userData.animals || {},
                totalAnimals: userData.totalAnimals || 0,
                speciesCount: userData.speciesCount || 0,
                currentQuestion: {}
            };
            
            // ÎßàÏßÄÎßâ ÌîåÎ†àÏù¥ ÏãúÍ∞Ñ ÏóÖÎç∞Ïù¥Ìä∏
            allUsers[userName].lastPlayed = new Date().toISOString();
            
            document.getElementById('current-user-name').textContent = userName;
            updateUI();
            updateAnimalCollection();
            updateUserList();
            generateQuestion();
            
            alert(`üéÆ ${userName}ÎãòÏúºÎ°ú Ï†ÑÌôòÎêòÏóàÏäµÎãàÎã§!`);
        }

        // ÌòÑÏû¨ ÏÇ¨Ïö©Ïûê Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû•
        function saveCurrentUserData() {
            if (!currentUser || !allUsers[currentUser]) return;
            
            const userData = {
                name: currentUser,
                score: gameState.score,
                level: gameState.level,
                animals: gameState.animals,
                totalAnimals: gameState.totalAnimals,
                speciesCount: gameState.speciesCount,
                lastPlayed: new Date().toISOString()
            };
            
            allUsers[currentUser] = { ...allUsers[currentUser], ...userData };
        }

        // ÏÇ¨Ïö©Ïûê Î™©Î°ù ÏóÖÎç∞Ïù¥Ìä∏
        function updateUserList() {
            const userList = document.getElementById('user-list');
            userList.innerHTML = '';
            
            // Ï†êÏàò ÏàúÏúºÎ°ú Ï†ïÎ†¨
            const sortedUsers = Object.values(allUsers).sort((a, b) => b.score - a.score);
            
            sortedUsers.forEach((user, index) => {
                const userCard = document.createElement('div');
                userCard.className = 'user-card';
                
                if (user.name === currentUser) {
                    userCard.classList.add('active');
                }
                
                const rankIcon = index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : `${index + 1}ÏúÑ`;
                
                userCard.innerHTML = `
                    <h4>${rankIcon} ${user.name}</h4>
                    <div class="user-stats">
                        Î†àÎ≤®: ${user.level} | Ï†êÏàò: ${user.score}Ï†ê<br>
                        ÎèôÎ¨º: ${user.totalAnimals}ÎßàÎ¶¨ (${user.speciesCount}Ï¢Ö)<br>
                        ÎßàÏßÄÎßâ ÌîåÎ†àÏù¥: ${formatDate(user.lastPlayed)}
                    </div>
                `;
                
                userCard.onclick = () => switchUser(user.name);
                userList.appendChild(userCard);
            });
        }

        // ÎÇ†Ïßú Ìè¨Îß∑ÌåÖ
        function formatDate(dateString) {
            if (!dateString) return 'Ïïå Ïàò ÏóÜÏùå';
            const date = new Date(dateString);
            return date.toLocaleString('ko-KR', {
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        // ==================== Îç∞Ïù¥ÌÑ∞ Í¥ÄÎ¶¨ Ìï®Ïàò ====================

        // Í≤åÏûÑ Îç∞Ïù¥ÌÑ∞ ÎÇ¥Î≥¥ÎÇ¥Í∏∞
        function exportGameData() {
            saveCurrentUserData();
            
            const gameData = {
                users: allUsers,
                currentUser: currentUser,
                exportDate: new Date().toISOString(),
                version: '2.0'
            };
            
            const dataStr = JSON.stringify(gameData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `ÎèôÎ¨ºÏàòÏßëÍ≤åÏûÑ-Î∞±ÏóÖ-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            URL.revokeObjectURL(url);
            
            alert('üìÅ Í≤åÏûÑ Îç∞Ïù¥ÌÑ∞Í∞Ä ÌååÏùºÎ°ú Îã§Ïö¥Î°úÎìúÎêòÏóàÏäµÎãàÎã§!');
        }

        // Í≤åÏûÑ Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞
        function importGameData(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    if (data.users && typeof data.users === 'object') {
                        if (!confirm('‚ö†Ô∏è Í∏∞Ï°¥ Îç∞Ïù¥ÌÑ∞Î•º ÎçÆÏñ¥Ïì∞ÏãúÍ≤†ÏäµÎãàÍπå?\nÌòÑÏû¨ Îç∞Ïù¥ÌÑ∞Îäî Î™®Îëê ÏÇ≠Ï†úÎê©ÎãàÎã§!')) {
                            return;
                        }
                        
                        allUsers = data.users;
                        currentUser = data.currentUser || Object.keys(allUsers)[0] || 'Í≤åÏä§Ìä∏';
                        
                        // ÌòÑÏû¨ ÏÇ¨Ïö©Ïûê Îç∞Ïù¥ÌÑ∞ Î°úÎìú
                        if (currentUser && allUsers[currentUser]) {
                            const userData = allUsers[currentUser];
                            gameState = {
                                score: userData.score || 0,
                                level: userData.level || 1,
                                animals: userData.animals || {},
                                totalAnimals: userData.totalAnimals || 0,
                                speciesCount: userData.speciesCount || 0,
                                currentQuestion: {}
                            };
                            
                            document.getElementById('current-user-name').textContent = currentUser;
                        }
                        
                        updateUI();
                        updateAnimalCollection();
                        updateUserList();
                        generateQuestion();
                        
                        alert('‚úÖ Í≤åÏûÑ Îç∞Ïù¥ÌÑ∞Î•º ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Î∂àÎü¨ÏôîÏäµÎãàÎã§!');
                        
                    } else {
                        throw new Error('Ïò¨Î∞îÎ•∏ Í≤åÏûÑ Îç∞Ïù¥ÌÑ∞ ÌååÏùºÏù¥ ÏïÑÎãôÎãàÎã§.');
                    }
                    
                } catch (error) {
                    console.error('Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞ Ïã§Ìå®:', error);
                    alert(`‚ùå ÌååÏùºÏùÑ ÏùΩÎäîÎç∞ Ïã§Ìå®ÌñàÏäµÎãàÎã§.\nÏò§Î•ò: ${error.message}`);
                }
            };
            reader.readAsText(file);
            
            // ÌååÏùº ÏûÖÎ†• Ï¥àÍ∏∞Ìôî
            event.target.value = '';
        }

        // Î™®Îì† Îç∞Ïù¥ÌÑ∞ Ï¥àÍ∏∞Ìôî
        function resetAllData() {
            if (!confirm('‚ö†Ô∏è Ï†ïÎßêÎ°ú Î™®Îì† ÏÇ¨Ïö©Ïûê Îç∞Ïù¥ÌÑ∞Î•º ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?\nÏù¥ ÏûëÏóÖÏùÄ ÎêòÎèåÎ¶¥ Ïàò ÏóÜÏäµÎãàÎã§!')) {
                return;
            }
            
            // Í∏∞Î≥∏ Í≤åÏä§Ìä∏ ÏÇ¨Ïö©ÏûêÎ°ú Ï¥àÍ∏∞Ìôî
            allUsers = {
                'Í≤åÏä§Ìä∏': {
                    name: 'Í≤åÏä§Ìä∏',
                    score: 0,
                    level: 1,
                    animals: {},
                    totalAnimals: 0,
                    speciesCount: 0,
                    createdAt: new Date().toISOString(),
                    lastPlayed: new Date().toISOString()
                }
            };
            
            currentUser = 'Í≤åÏä§Ìä∏';
            gameState = {
                score: 0,
                level: 1,
                currentQuestion: {},
                animals: {},
                totalAnimals: 0,
                speciesCount: 0
            };
            
            document.getElementById('current-user-name').textContent = 'Í≤åÏä§Ìä∏';
            updateUI();
            updateAnimalCollection();
            updateUserList();
            generateQuestion();
            
            alert('üóëÔ∏è Î™®Îì† Îç∞Ïù¥ÌÑ∞Í∞Ä Ï¥àÍ∏∞ÌôîÎêòÏóàÏäµÎãàÎã§.');
        }

        // ==================== ÌéòÏù¥ÏßÄ Í¥ÄÎ¶¨ Ìï®Ïàò ====================

        // ÌéòÏù¥ÏßÄ Ï†ÑÌôò
        function showPage(pageName) {
            // Î™®Îì† ÌéòÏù¥ÏßÄ Ïà®Í∏∞Í∏∞
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Î™®Îì† Î≤ÑÌäº ÎπÑÌôúÏÑ±Ìôî
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // ÏÑ†ÌÉùÎêú ÌéòÏù¥ÏßÄ Î≥¥Ïù¥Í∏∞
            document.getElementById(pageName + '-page').classList.add('active');
            
            // ÏÑ†ÌÉùÎêú Î≤ÑÌäº ÌôúÏÑ±Ìôî
            event.target.classList.add('active');
            
            // ÌéòÏù¥ÏßÄÎ≥Ñ UI Ï°∞Ï†à
            const gameStats = document.getElementById('game-stats');
            const userInfo = document.getElementById('user-info');
            
            if (pageName === 'game') {
                gameStats.style.display = 'flex';
                userInfo.style.display = 'block';
            } else if (pageName === 'users') {
                gameStats.style.display = 'none';
                userInfo.style.display = 'block';
                updateUserList(); // ÏÇ¨Ïö©Ïûê ÌéòÏù¥ÏßÄ Ïó¥ ÎïåÎßàÎã§ Î™©Î°ù ÏÉàÎ°úÍ≥†Ïπ®
            } else {
                gameStats.style.display = 'none';
                userInfo.style.display = 'none';
            }
        }

        // ==================== Í≤åÏûÑ Ï¥àÍ∏∞Ìôî ====================

        // Í≤åÏûÑ Ï¥àÍ∏∞Ìôî
        function initializeGame() {
            console.log('üéÆ ÎèôÎ¨º ÏàòÏßë ÏàòÌïô Í≤åÏûÑ ÏãúÏûë!');
            
            // Í∏∞Î≥∏ Í≤åÏä§Ìä∏ ÏÇ¨Ïö©Ïûê ÏÉùÏÑ±
            if (Object.keys(allUsers).length === 0) {
                allUsers['Í≤åÏä§Ìä∏'] = {
                    name: 'Í≤åÏä§Ìä∏',
                    score: 0,
                    level: 1,
                    animals: {},
                    totalAnimals: 0,
                    speciesCount: 0,
                    createdAt: new Date().toISOString(),
                    lastPlayed: new Date().toISOString()
                };
                currentUser = 'Í≤åÏä§Ìä∏';
            }
            
            // UI Ï¥àÍ∏∞Ìôî
            document.getElementById('current-user-name').textContent = currentUser;
            updateUI();
            updateAnimalCollection();
            updateUserList();
            generateQuestion();
            
            console.log('‚úÖ Í≤åÏûÑ Ï¥àÍ∏∞Ìôî ÏôÑÎ£å!');
        }

        // ==================== Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà ====================

        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Í≤åÏûÑ Ï¥àÍ∏∞Ìôî
        window.addEventListener('load', function() {
            initializeGame();
        });

        // ÌÇ§Î≥¥Îìú Ïù¥Î≤§Ìä∏ Ï≤òÎ¶¨
        document.addEventListener('DOMContentLoaded', function() {
            // Enter ÌÇ§Î°ú ÎãµÏïà Ï†úÏ∂ú
            const answerInput = document.getElementById('answer');
            if (answerInput) {
                answerInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        checkAnswer();
                    }
                });
            }
            
            // Enter ÌÇ§Î°ú ÏÇ¨Ïö©Ïûê ÏÉùÏÑ±
            const userNameInput = document.getElementById('new-user-name');
            if (userNameInput) {
                userNameInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        createUser();
                    }
                });
            }
        });

        // ÌéòÏù¥ÏßÄ Ï¢ÖÎ£å Ïãú Îç∞Ïù¥ÌÑ∞ ÏûêÎèô Ï†ÄÏû•
        window.addEventListener('beforeunload', function() {
            saveCurrentUserData();
        });

        console.log('üéÆ ÎèôÎ¨º ÏàòÏßë ÏàòÌïô Í≤åÏûÑÏù¥ Î°úÎìúÎêòÏóàÏäµÎãàÎã§!');
    </script>
</body>
</html>
