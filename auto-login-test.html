<!DOCTYPE html>
<html>
<head>
    <title>ìë™ ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f0f8ff; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
        .test-btn { background: linear-gradient(45deg, #4169E1, #1E90FF); color: white; padding: 15px 30px; border: none; border-radius: 10px; font-size: 1.1rem; cursor: pointer; margin: 10px; min-width: 200px; }
        .test-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(65, 105, 225, 0.3); }
        .result { margin: 20px 0; padding: 15px; border-radius: 8px; }
        .success { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
        .error { background: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; }
        .info { background: #d1ecf1; border: 1px solid #bee5eb; color: #0c5460; }
        .step { background: #fff3cd; border: 1px solid #ffeaa7; color: #856404; margin: 5px 0; padding: 10px; border-radius: 5px; }
        iframe { width: 100%; height: 600px; border: 2px solid #ddd; border-radius: 10px; margin: 20px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª ìë™ ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸</h1>
        
        <div class="test-section">
            <h2>ğŸ“‹ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤</h2>
            <div class="info result">
                <strong>í…ŒìŠ¤íŠ¸ ê³„ì •:</strong> ì•„ë¹  / PIN: 9329<br>
                <strong>ëª©ì :</strong> ë¡œê·¸ì¸ í›„ ê²Œì„ í˜ì´ì§€ê°€ ì •ìƒ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ® ìë™ í…ŒìŠ¤íŠ¸ ì‹¤í–‰</h2>
            <button class="test-btn" onclick="startAutoTest()">ğŸš€ ìë™ ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸ ì‹œì‘</button>
            <button class="test-btn" onclick="loadGameFrame()">ğŸ“± ê²Œì„ í”„ë ˆì„ ë¡œë“œ</button>
            <div id="test-results"></div>
        </div>
        
        <div id="game-frame-container">
            <!-- ê²Œì„ iframeì´ ì—¬ê¸°ì— ë¡œë“œë©ë‹ˆë‹¤ -->
        </div>
    </div>
    
    <script>
        let gameFrame = null;
        
        function addResult(message, type = 'info') {
            const results = document.getElementById('test-results');
            const div = document.createElement('div');
            div.className = `result ${type}`;
            div.innerHTML = message;
            results.appendChild(div);
        }
        
        function addStep(message) {
            const results = document.getElementById('test-results');
            const div = document.createElement('div');
            div.className = 'step';
            div.innerHTML = 'â³ ' + message;
            results.appendChild(div);
        }
        
        function loadGameFrame() {
            const container = document.getElementById('game-frame-container');
            container.innerHTML = '<iframe id="game-iframe" src="/"></iframe>';
            gameFrame = document.getElementById('game-iframe');
            addResult('ğŸ® ê²Œì„ í”„ë ˆì„ì´ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤', 'info');
        }
        
        function startAutoTest() {
            const results = document.getElementById('test-results');
            results.innerHTML = '';
            
            addStep('ê²Œì„ í”„ë ˆì„ ë¡œë“œ ì¤‘...');
            loadGameFrame();
            
            // ê²Œì„ ë¡œë“œ ëŒ€ê¸°
            setTimeout(() => {
                addStep('ë¡œê·¸ì¸ í¼ í™•ì¸ ì¤‘...');
                performLogin();
            }, 3000);
        }
        
        function performLogin() {
            try {
                const iframe = document.getElementById('game-iframe');
                if (!iframe || !iframe.contentDocument) {
                    addResult('âŒ ê²Œì„ í”„ë ˆì„ì— ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤', 'error');
                    return;
                }
                
                const doc = iframe.contentDocument;
                const nameInput = doc.getElementById('player-name-input');
                const pinInput = doc.getElementById('player-pin-input');
                const loginBtn = doc.getElementById('login-btn');
                
                if (!nameInput || !pinInput || !loginBtn) {
                    addResult('âŒ ë¡œê·¸ì¸ í¼ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤', 'error');
                    setTimeout(() => performLogin(), 2000);
                    return;
                }
                
                addStep('ë¡œê·¸ì¸ ì •ë³´ ì…ë ¥ ì¤‘...');
                
                // ë¡œê·¸ì¸ ì •ë³´ ì…ë ¥
                nameInput.value = 'ì•„ë¹ ';
                pinInput.value = '9329';
                
                addResult('âœ… ë¡œê·¸ì¸ ì •ë³´ ì…ë ¥ ì™„ë£Œ (ì•„ë¹  / 9329)', 'success');
                
                // ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­
                setTimeout(() => {
                    addStep('ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­ ì¤‘...');
                    loginBtn.click();
                    
                    // ë¡œê·¸ì¸ ê²°ê³¼ í™•ì¸
                    setTimeout(() => {
                        checkLoginResult(doc);
                    }, 2000);
                    
                }, 1000);
                
            } catch (error) {
                addResult(`âŒ ë¡œê·¸ì¸ ì‹¤í–‰ ì˜¤ë¥˜: ${error.message}`, 'error');
            }
        }
        
        function checkLoginResult(doc) {
            try {
                const overlay = doc.getElementById('login-overlay');
                const gamePages = doc.querySelectorAll('.page');
                const activePages = doc.querySelectorAll('.page.active');
                
                if (overlay && overlay.style.display === 'none') {
                    addResult('âœ… ë¡œê·¸ì¸ ì˜¤ë²„ë ˆì´ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ¨ê²¨ì¡ŒìŠµë‹ˆë‹¤', 'success');
                } else {
                    addResult('âŒ ë¡œê·¸ì¸ ì˜¤ë²„ë ˆì´ê°€ ì•„ì§ í‘œì‹œë˜ê³  ìˆìŠµë‹ˆë‹¤', 'error');
                }
                
                if (activePages.length > 0) {
                    const activePage = activePages[0];
                    const pageId = activePage.id;
                    addResult(`âœ… í™œì„± í˜ì´ì§€ ë°œê²¬: ${pageId}`, 'success');
                } else {
                    addResult('âŒ í™œì„±í™”ëœ í˜ì´ì§€ê°€ ì—†ìŠµë‹ˆë‹¤', 'error');
                }
                
                // ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ í™•ì¸
                const navBtns = doc.querySelectorAll('.nav-btn');
                const activeNavBtns = doc.querySelectorAll('.nav-btn.active');
                
                if (activeNavBtns.length > 0) {
                    addResult(`âœ… í™œì„± ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼: ${activeNavBtns.length}ê°œ`, 'success');
                } else {
                    addResult('âŒ í™œì„±í™”ëœ ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ì´ ì—†ìŠµë‹ˆë‹¤', 'error');
                }
                
                // ìµœì¢… ê²°ê³¼
                if (overlay && overlay.style.display === 'none' && activePages.length > 0) {
                    addResult('ğŸ‰ ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸ ì„±ê³µ! ê²Œì„ í˜ì´ì§€ê°€ ì •ìƒì ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤!', 'success');
                } else {
                    addResult('âš ï¸ ë¡œê·¸ì¸ì€ ë˜ì—ˆì§€ë§Œ ì¼ë¶€ ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤', 'error');
                }
                
            } catch (error) {
                addResult(`âŒ ë¡œê·¸ì¸ ê²°ê³¼ í™•ì¸ ì˜¤ë¥˜: ${error.message}`, 'error');
            }
        }
    </script>
</body>
</html>